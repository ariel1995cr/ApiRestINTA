"use strict";(self["webpackChunkquasarfront"]=self["webpackChunkquasarfront"]||[]).push([[811],{2584:(e,a,t)=>{t.d(a,{E:()=>d});var i=t(515),o=t.n(i),n=t(5474),s=t(1959),l=t(6249),c=t(6394),r=t(8825);const d=()=>{const e=(0,r.Z)(),a=(0,s.iH)([]),t=async()=>{l.Z.show({spinner:c.Z}),await n.api.get("/api/v1/admin/estaciones").then((e=>{a.value=e.data,a.value.forEach((e=>{e.position={lat:Number(e.Latitud),lng:Number(e.Longitud)}}))})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),e.loading.hide()},i=async t=>{l.Z.show({spinner:c.Z}),await n.api.get("/api/v1/admin/estacion/"+t).then((e=>{a.value=e.data})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),l.Z.hide()},d=async a=>{l.Z.show({spinner:c.Z});const t=await n.api.post("/api/v1/admin/estacion/"+a.value.id,o()({},a.value)).then((t=>(a.value=t.data,e.notify({message:t.data.msg,type:"positive"}),!0))).catch((a=>(console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"}),!1)));return l.Z.hide(),t};return{data:a,getEstaciones:t,getEstacion:i,updateEstacion:d}}},2473:(e,a,t)=>{t.d(a,{D:()=>s});var i=t(5474),o=t(1959),n=t(8825);const s=()=>{const e=(0,n.Z)(),a=(0,o.iH)({columns:null,mediaTemperatura:"-",mediaViento:"-",mediaHumedad:"-",mediaPresionBarometrica:"-",mediaPrecipitacion:"-",precipitacion:[]}),t=async(t,o)=>{const n=await i.api.get(`/api/v1/admin/estacion/${t}/medicion/${o}`).then((e=>{a.value.columns=e.data.medicion.columns,a.value.mediaTemperatura=e.data.mediaTemperatura,a.value.mediaViento=e.data.mediaViento,a.value.mediaHumedad=e.data.mediaHumedad,a.value.mediaPresionBarometrica=e.data.mediaPresionBarometrica,a.value.mediaPrecipitacion=e.data.mediaPrecipitacion,a.value.precipitacion=e.data.precipitacion.columns})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})}));return n};return{data:a,getHistoricoMediciones:t}}},4811:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});var i=t(3673),o=t(2323);const n={class:"row justify-center"},s={class:"col-4"},l={class:"text-h4"},c={class:"row justify-end q-mx-lg"},r={class:"col-12 col-md-6"},d={class:"text-subtitle1"},m=(0,i.Wm)("br",null,null,-1),u=(0,i.Wm)("br",null,null,-1),p={class:"col-12 col-md-6"};function g(e,a,t,g,v,x){const h=(0,i.up)("GMapInfoWindow"),f=(0,i.up)("GMapMarker"),y=(0,i.up)("GMapMap"),w=(0,i.up)("q-table"),b=(0,i.up)("statics-dashboard"),W=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",n,[(0,i.Wm)("div",s,[(0,i.Wm)("div",l," Bienvenido "+(0,o.zw)(e.usuario.nombre)+" "+(0,o.zw)(e.usuario.apellido),1)])]),(0,i.Wm)("div",c,[(0,i.Wm)("div",r,[(0,i.Wm)(y,{center:{lat:-44,lng:-69},zoom:6,"map-type-id":"terrain",style:{width:"90%",height:"100%"}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.data,((t,n)=>((0,i.wg)(),(0,i.j4)(f,{key:n,position:t.position,clickable:!0,onClick:a=>e.openMarker(t.Código)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{opened:e.openedMarkerID===t.Código,onCloseclick:a[1]||(a[1]=a=>e.openedMarkerID=null)},{default:(0,i.w5)((()=>[(0,i.Wm)("div",null,[(0,i.Wm)("p",d,(0,o.zw)(t.Denominación),1),(0,i.Wm)("span",null,[(0,i.Uk)(" Latitud: "+(0,o.zw)(t.Latitud)+" ",1),m,(0,i.Uk)(" Longitud: "+(0,o.zw)(t.Longitud)+" ",1),u])])])),_:2},1032,["opened"])])),_:2},1032,["position","onClick"])))),128))])),_:1})]),(0,i.Wm)("div",p,[(0,i.Wm)(w,{title:"Listado de estaciones",dense:"",rows:e.data,columns:e.columns,"row-key":"Código",pagination:{rowsPerPage:10},onRowClick:e.verEstacion},null,8,["rows","columns","onRowClick"])])]),null!=e.openedMarkerID?((0,i.wg)(),(0,i.j4)(b,{key:0,estacion:e.openedMarkerID},null,8,["estacion"])):(0,i.kq)("",!0)])),_:1})}var v=t(1959),x=t(589),h=t(2584),f=t(9582),y=t(8880);const w=(0,i.HX)("data-v-82d53d44");(0,i.dD)("data-v-82d53d44");const b={class:"row q-pa-lg justify-center"},W=(0,i.Wm)("p",{class:"text-dark",style:{"max-lines":"1"}}," Temperatura Media ",-1),k={class:"text-h6 text-center"},q=(0,i.Wm)("p",{class:"text-dark",style:{"max-lines":"1"}}," Velocidad Viento Media ",-1),_={class:"text-h6 text-center"},M=(0,i.Wm)("p",{class:"text-dark",style:{"max-lines":"1"}}," Humedad Media ",-1),Z={class:"text-h6 text-center"},C=(0,i.Wm)("p",{class:"text-dark",style:{"max-lines":"1"}}," Presion Barometrica Media ",-1),P={class:"text-h6 text-center"},D=(0,i.Wm)("p",{class:"text-dark",style:{"max-lines":"1"}}," Precipitacion Media ",-1),H={class:"text-h6 text-center"},L={class:"col-12 q-mt-lg",ref:"chart"},z={key:0,class:"col-12 q-mt-lg",ref:"chart2"};(0,i.Cn)();const j=w(((e,a,t,n,s,l)=>{const c=(0,i.up)("q-card-section"),r=(0,i.up)("q-card");return e.mediciones.columns?((0,i.wg)(),(0,i.j4)(y.uT,{key:0,appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:w((()=>[(0,i.Wm)("div",b,[(0,i.Wm)(r,{bordered:"",class:"my-card col-2",style:{"max-height":"150px"}},{default:w((()=>[(0,i.Wm)(c,null,{default:w((()=>[W,(0,i.Wm)("p",k,(0,o.zw)(e.mediciones.mediaTemperatura),1)])),_:1})])),_:1}),(0,i.Wm)(r,{bordered:"",class:"my-card col-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:w((()=>[(0,i.Wm)(c,null,{default:w((()=>[q,(0,i.Wm)("p",_,(0,o.zw)(e.mediciones.mediaViento),1)])),_:1})])),_:1}),(0,i.Wm)(r,{bordered:"",class:"my-card col-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:w((()=>[(0,i.Wm)(c,null,{default:w((()=>[M,(0,i.Wm)("p",Z,(0,o.zw)(e.mediciones.mediaHumedad),1)])),_:1})])),_:1}),(0,i.Wm)(r,{bordered:"",class:"my-card col-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:w((()=>[(0,i.Wm)(c,null,{default:w((()=>[C,(0,i.Wm)("p",P,(0,o.zw)(e.mediciones.mediaPresionBarometrica),1)])),_:1})])),_:1}),(0,i.Wm)(r,{bordered:"",class:"my-card col-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:w((()=>[(0,i.Wm)(c,null,{default:w((()=>[D,(0,i.Wm)("p",H,(0,o.zw)(e.mediciones.mediaPrecipitacion),1)])),_:1})])),_:1}),(0,i.Wm)("div",L,null,512),0!=e.mediciones.precipitacion.length?((0,i.wg)(),(0,i.j4)("div",z,null,512)):(0,i.kq)("",!0)])])),_:1})):(0,i.kq)("",!0)}));var E=t(4130),I=t(2473);const T=(0,i.aZ)({name:"StaticsDashboard",props:{estacion:{type:Number,required:!1}},setup(e){const{data:a,getHistoricoMediciones:t}=(0,I.D)(),o=(0,v.iH)(null),n=(0,v.iH)(null);return(0,i.bv)((async()=>{await t(e.estacion,10),E.ZP.generate({bindto:o.value,data:{x:"x",columns:a.value.columns,type:(0,E.jv)(),types:{"Presión barometrica":(0,E.SO)()}},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),E.ZP.generate({bindto:n.value,data:{x:"x",columns:a.value.precipitacion,type:(0,E.Kb)(),groups:[["Precipitaciones"]]},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}})})),{props:e,chart:o,chart2:n,mediciones:a}}});var B=t(151),V=t(5589),S=t(7518),N=t.n(S);T.render=j,T.__scopeId="data-v-82d53d44";const Q=T;N()(T,"components",{QCard:B.Z,QCardSection:V.Z});const G=(0,i.aZ)({name:"PageIndex",components:{StaticsDashboard:Q},setup(){const e=(0,f.tv)(),a=JSON.parse(x.Z.getItem("user")),{data:t,getEstaciones:o}=(0,h.E)(),n=(a,t)=>{e.push({name:"verEstacion",params:{id:t.Código}})},s=(0,v.iH)(null),l=e=>{s.value=e},c=[{name:"Denominación",align:"left",label:"Denominación",field:"Denominación",sortable:!0},{name:"Latitud",align:"left",label:"Latitud",field:"Latitud",sortable:!0},{name:"Longitud",align:"left",label:"Longitud",field:"Longitud"}];(0,i.bv)((async()=>{await o()}));const r=e=>{console.log("cerrado gola"),console.log(e)};return{usuario:a,data:t,columns:c,verEstacion:n,openMarker:l,openedMarkerID:s,cerrar:r}}});var O=t(4379),K=t(6429);G.render=g;const R=G;N()(G,"components",{QPage:O.Z,QTable:K.Z})}}]);