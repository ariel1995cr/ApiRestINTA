"use strict";(self["webpackChunkquasarfront"]=self["webpackChunkquasarfront"]||[]).push([[243],{2243:(e,o,a)=>{a.r(o),a.d(o,{default:()=>Z});var r=a(3673),i=a(2323);const n=(0,r.HX)("data-v-2cc3c6e2");(0,r.dD)("data-v-2cc3c6e2");const l={class:"row q-pa-lg"},s={class:"col-6 q-pa-sm"},t={key:0,style:{color:"red"}},c={class:"col-6 q-pa-sm"},d={key:0,style:{color:"red"}},p={class:"col-12 q-pa-sm"},m={key:0,style:{color:"red"}},u={class:"row q-pa-sm justify-content-end"};(0,r.Cn)();const f=n(((e,o,a,n,f,h)=>{var v,g,b,w,k,y,q,I,F,A,V,Z,j,W,x;const P=(0,r.up)("q-input"),U=(0,r.up)("q-select"),C=(0,r.up)("q-btn");return(0,r.wg)(),(0,r.j4)("div",l,[(0,r.Wm)("div",s,[(0,r.Wm)(P,{filled:"",modelValue:e.data.fechaInicio,"onUpdate:modelValue":o[1]||(o[1]=o=>e.data.fechaInicio=o),label:"Fecha inicio",mask:"##/##/####","fill-mask":"#",hint:"Ingrese la fecha en formato DD/MM/AAAA",error:(null===(v=e.errores)||void 0===v||null===(g=v.fechaInicio)||void 0===g?void 0:g.length)>0,"error-message":(null===(b=e.errores)||void 0===b||null===(w=b.fechaInicio)||void 0===w?void 0:w.length)>0?e.errores.fechaInicio[0]:""},null,8,["modelValue","error","error-message"]),null!==(k=e.errores)&&void 0!==k&&k.fechaInicio?((0,r.wg)(),(0,r.j4)("span",t,(0,i.zw)(e.errores.fechaInicio[0]),1)):(0,r.kq)("",!0)]),(0,r.Wm)("div",c,[(0,r.Wm)(P,{filled:"",modelValue:e.data.fechaFin,"onUpdate:modelValue":o[2]||(o[2]=o=>e.data.fechaFin=o),label:"Fecha fin",mask:"##/##/####","fill-mask":"#",hint:"Ingrese la fecha en formato DD/MM/AAAA",error:(null===(y=e.errores)||void 0===y||null===(q=y.fechaFin)||void 0===q?void 0:q.length)>0,"error-message":(null===(I=e.errores)||void 0===I||null===(F=I.fechaFin)||void 0===F?void 0:F.length)>0?e.errores.fechaFin[0]:""},null,8,["modelValue","error","error-message"]),null!==(A=e.errores)&&void 0!==A&&A.fechaFin?((0,r.wg)(),(0,r.j4)("span",d,(0,i.zw)(e.errores.fechaFin[0]),1)):(0,r.kq)("",!0)]),(0,r.Wm)("div",p,[(0,r.Wm)(U,{filled:"",multiple:"",modelValue:e.data.mediciones,"onUpdate:modelValue":o[3]||(o[3]=o=>e.data.mediciones=o),options:e.dataReportes,label:"Seleccionar mediciones para reporte",error:(null===(V=e.errores)||void 0===V||null===(Z=V.mediciones)||void 0===Z?void 0:Z.length)>0,"error-message":(null===(j=e.errores)||void 0===j||null===(W=j.mediciones)||void 0===W?void 0:W.length)>0?e.errores.mediciones[0]:""},null,8,["modelValue","options","error","error-message"]),null!==(x=e.errores)&&void 0!==x&&x.mediciones?((0,r.wg)(),(0,r.j4)("span",m,(0,i.zw)(e.errores.mediciones[0]),1)):(0,r.kq)("",!0)]),(0,r.Wm)("div",u,[(0,r.Wm)(C,{color:"primary",label:"Exportar datos",onClick:o[4]||(o[4]=o=>e.exportarPdf(e.id,e.data.fechaInicio,e.data.fechaFin,e.data.mediciones))})])])}));var h=a(1959),v=(a(71),a(7965),a(5474)),g=a(6249),b=a(6394),w=a(8825);const k=()=>{const e=(0,w.Z)(),o=(0,h.iH)([]),a=(0,h.iH)([]),r=async a=>{g.Z.show({spinner:b.Z}),await v.api.get(`/api/v1/admin/estacion/${a}/medicionesPosibles`).then((e=>{o.value=e.data})).catch((o=>{console.log(o),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),e.loading.hide()},i=async(o,r,i,n)=>{g.Z.show({spinner:b.Z}),await v.api.post("/api/v1/admin/estacion/exportar/pdf",{id:o,fechaInicio:r,fechaFin:i,mediciones:n},{responseType:"blob"}).then((e=>{console.log(e.data);const o=new Blob([e.data],{type:"application/pdf"}),a=window.URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.setAttribute("target","_blank"),r.click(),r.remove(),URL.revokeObjectURL(a)})).catch((o=>{a.value=o.response.data.errors,e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),e.loading.hide()};return{data:o,getMedicionesPosibles:r,exportarPdf:i,errores:a}},y=(0,r.aZ)({name:"Exportar",props:{id:{type:String,required:!0}},setup(e){const{errores:o,data:a,getMedicionesPosibles:i,exportarPdf:n}=k(),l=(0,h.qj)({fechaInicio:null,fechaFin:null,mediciones:null});return(0,r.bv)((async()=>{await i(e.id)})),{data:l,dataReportes:a,exportarPdf:n,errores:o}}});var q=a(4842),I=a(7637),F=a(8240),A=a(7518),V=a.n(A);y.render=f,y.__scopeId="data-v-2cc3c6e2";const Z=y;V()(y,"components",{QInput:q.Z,QSelect:I.Z,QBtn:F.Z})}}]);