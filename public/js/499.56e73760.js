"use strict";(self["webpackChunkquasarfront"]=self["webpackChunkquasarfront"]||[]).push([[499],{2584:(e,a,t)=>{t.d(a,{E:()=>c});var i=t(515),l=t.n(i),o=t(5474),n=t(1959),s=t(6249),r=t(6394),d=t(8825);const c=()=>{const e=(0,d.Z)(),a=(0,n.iH)([]),t=async()=>{s.Z.show({spinner:r.Z}),await o.api.get("/api/v1/admin/estaciones").then((e=>{a.value=e.data,a.value.forEach((e=>{e.position={lat:Number(e.Latitud),lng:Number(e.Longitud)}}))})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),e.loading.hide()},i=async t=>{s.Z.show({spinner:r.Z}),await o.api.get("/api/v1/admin/estacion/"+t).then((e=>{a.value=e.data})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),s.Z.hide()},c=async a=>{s.Z.show({spinner:r.Z});const t=await o.api.post("/api/v1/admin/estacion/"+a.value.id,l()({},a.value)).then((t=>(a.value=t.data,e.notify({message:t.data.msg,type:"positive"}),!0))).catch((a=>(console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"}),!1)));return s.Z.hide(),t};return{data:a,getEstaciones:t,getEstacion:i,updateEstacion:c}}},2139:(e,a,t)=>{t.d(a,{Z:()=>T});var i=t(3673),l=t(8880),o=t(2323);const n=(0,i.HX)("data-v-1240353e");(0,i.dD)("data-v-1240353e");const s={class:"row q-pa-lg justify-center"},r=(0,i.Wm)("div",{class:"text-subtitle2 text-capitalize"}," Temperatura Media ",-1),d={class:"text-h6 text-left"},c=(0,i.Wm)("div",{class:"text-subtitle2"}," Velocidad Viento Media ",-1),m={class:"text-h6 text-left"},u=(0,i.Wm)("div",{class:"text-subtitle2 text-left"}," Humedad Media ",-1),p={class:"text-h6 text-left"},g=(0,i.Wm)("div",{class:"text-subtitle2 text-left"}," Presion Barometrica Media ",-1),v={class:"text-h6 text-left"},f=(0,i.Wm)("div",{class:"text-subtitle2 text-left"}," Precipitacion Media ",-1),y={class:"text-h6 text-left"},x={class:"col-12 q-mt-lg",ref:"chart"},b={class:"col-12 col-md-6 q-mt-lg",ref:"limnimetroRef"},h={class:"col-12 col-md-6  q-mt-lg",ref:"bateriaRef"},W={class:"col-12 col-md-6  q-mt-lg",ref:"temperaturaRef"},w={class:"col-12 col-md-6  q-mt-lg",ref:"humedadRef"},q={class:"col-12 col-md-6  q-mt-lg",ref:"probLluviaRef"},Z={class:"col-12 col-md-6  q-mt-lg",ref:"velocidadVientoRef"},_={class:"col-12 col-md-6  q-mt-lg",ref:"presionBarometricaRef"},H={class:"col-12 col-md-6  q-mt-lg",ref:"radiacionSolarRef"};(0,i.Cn)();const k=n(((e,a,t,k,P,z)=>{const Q=(0,i.up)("q-card-section"),R=(0,i.up)("q-card"),V=(0,i.up)("q-spinner-audio");return e.mediciones.columns?((0,i.wg)(),(0,i.j4)(l.uT,{key:0,appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:n((()=>[(0,i.Wm)("div",s,[(0,i.Wm)(R,{bordered:"",flat:"",class:"my-card col-4 col-md-2",style:{"max-height":"150px"}},{default:n((()=>[(0,i.Wm)(Q,{horizontal:""},{default:n((()=>[(0,i.Wm)(Q,{class:"text-left"},{default:n((()=>[r,(0,i.Wm)("p",d,(0,o.zw)(e.mediciones.mediaTemperatura),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(R,{bordered:"",flat:"",class:"my-card col-4 col-md-2 q-ml-lg",style:{"max-height":"150px"}},{default:n((()=>[(0,i.Wm)(Q,{horizontal:""},{default:n((()=>[(0,i.Wm)(Q,{class:"text-left"},{default:n((()=>[c,(0,i.Wm)("p",m,(0,o.zw)(e.mediciones.mediaViento),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(R,{bordered:"",flat:"",class:"my-card col-4 col-md-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:n((()=>[(0,i.Wm)(Q,{horizontal:""},{default:n((()=>[(0,i.Wm)(Q,{class:"text-left"},{default:n((()=>[u,(0,i.Wm)("p",p,(0,o.zw)(e.mediciones.mediaHumedad),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(R,{bordered:"",flat:"",class:"my-card col-4 col-md-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:n((()=>[(0,i.Wm)(Q,{horizontal:""},{default:n((()=>[(0,i.Wm)(Q,{class:"text-left"},{default:n((()=>[g,(0,i.Wm)("p",v,(0,o.zw)(e.mediciones.mediaPresionBarometrica),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(R,{bordered:"",flat:"",class:"my-card col-4 col-md-2 q-px-lg-xl q-ml-lg",style:{"max-height":"150px"}},{default:n((()=>[(0,i.Wm)(Q,{horizontal:""},{default:n((()=>[(0,i.Wm)(Q,{class:"text-left"},{default:n((()=>[f,(0,i.Wm)("p",y,(0,o.zw)(e.mediciones.mediaPrecipitacion),1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)("div",x,null,512),(0,i.Wm)("div",b,null,512),(0,i.Wm)("div",h,null,512),(0,i.Wm)("div",W,null,512),(0,i.Wm)("div",w,null,512),(0,i.Wm)("div",q,null,512),(0,i.Wm)("div",Z,null,512),(0,i.Wm)("div",_,null,512),(0,i.Wm)("div",H,null,512)])])),_:1})):((0,i.wg)(),(0,i.j4)(V,{key:1,size:"xl",color:"primary"}))}));var P=t(1959),z=t(4130),Q=t(5474),R=t(8825);const V=()=>{const e=(0,R.Z)(),a=(0,P.iH)({columns:null,mediaTemperatura:"-",mediaViento:"-",mediaHumedad:"-",mediaPresionBarometrica:"-",mediaPrecipitacion:"-",precipitacion:[]}),t=async(t,i=null)=>{await Q.api.get(`/api/v1/admin/estacion/${t}/estadistica`).then((e=>{a.value.columns=e.data.data.columns,a.value.mediaTemperatura=e.data.mediaTemperatura,a.value.mediaViento=e.data.mediaViento,a.value.mediaHumedad=e.data.mediaHumedad,a.value.mediaPresionBarometrica=e.data.mediaPresionBarometrica,a.value.mediaPrecipitacion=e.data.mediaPrecipitacion})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})}))};return{data:a,getHistoricoMediciones:t}},E=(0,i.aZ)({name:"StaticsDashboard",props:{estacion:{type:Number,required:!1}},setup(e){const{data:a,getHistoricoMediciones:t}=V(),l=(0,P.iH)(null),o=(0,P.iH)(null),n=(0,P.iH)(null),s=(0,P.iH)(null),r=(0,P.iH)(null),d=(0,P.iH)(null),c=(0,P.iH)(null),m=(0,P.iH)(null),u=(0,P.iH)(null),p=(0,P.iH)(!1);return(0,i.bv)((async()=>{p.value=!0,await t(e.estacion,10),z.ZP.generate({bindto:l.value,data:{x:"x",columns:a.value.columns,type:(0,z.Nb)(),types:{"Presión barometrica":(0,z.SO)()}},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),a.value.columns.forEach((e=>{"Limnimetro"===e[0]&&z.ZP.generate({bindto:o.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.$y)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Bateria"===e[0]&&z.ZP.generate({bindto:n.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.Nb)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Temperatura"===e[0]&&z.ZP.generate({bindto:s.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.Kb)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Humedad"===e[0]&&z.ZP.generate({bindto:r.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.$y)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Probabilidad de lluvia"===e[0]&&z.ZP.generate({bindto:d.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.$y)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Velocidad del viento"===e[0]&&z.ZP.generate({bindto:c.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.$y)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Presión barometrica"===e[0]&&z.ZP.generate({bindto:m.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.$y)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}}),"Radiacion solar"===e[0]&&z.ZP.generate({bindto:u.value,data:{x:"x",columns:[a.value.columns[0],e],type:(0,z.$y)()},axis:{x:{type:"timeseries",tick:{fit:!0,multiline:!1,autorotate:!0,rotate:25,format:"%e %b %y"}}}})})),p.value=!1})),{props:e,chart:l,mediciones:a,loading:p,limnimetroRef:o,bateriaRef:n,temperaturaRef:s,humedadRef:r,probLluviaRef:d,velocidadVientoRef:c,presionBarometricaRef:m,radiacionSolarRef:u}}});var C=t(151),j=t(5589),M=t(2509),B=t(7518),S=t.n(B);E.render=k,E.__scopeId="data-v-1240353e";const T=E;S()(E,"components",{QCard:C.Z,QCardSection:j.Z,QSpinnerAudio:M.Z})},3499:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var i=t(3673),l=t(2323);const o=(0,i.HX)("data-v-6bda07ee");(0,i.dD)("data-v-6bda07ee");const n={class:"row justify-start q-mx-lg"},s={class:"col-12 text-h4 text-center"},r={class:"col-12 col-md-6",style:{height:"180px"}},d={class:"col-12 col-md-6"},c={class:"row justify-center q-mt-sm"},m={class:"row col-6 justify-start q-px-lg"},u={key:0,class:"col-12"},p={key:0},g={key:1},v={key:0},f={key:1,class:"col-12"},y=(0,i.Wm)("div",{class:"text-h6"},"Editar coordenada",-1);(0,i.Cn)();const x=o(((e,a,t,x,b,h)=>{const W=(0,i.up)("q-img"),w=(0,i.up)("q-item-label"),q=(0,i.up)("q-item-section"),Z=(0,i.up)("q-item"),_=(0,i.up)("q-list"),H=(0,i.up)("q-btn"),k=(0,i.up)("q-btn-toggle"),P=(0,i.up)("q-icon"),z=(0,i.up)("q-input"),Q=(0,i.up)("q-td"),R=(0,i.up)("q-tr"),V=(0,i.up)("q-table"),E=(0,i.up)("statics-dashboard"),C=(0,i.up)("q-scroll-area"),j=(0,i.up)("q-card-section"),M=(0,i.up)("GMapMarker"),B=(0,i.up)("GMapMap"),S=(0,i.up)("q-card-actions"),T=(0,i.up)("q-card"),$=(0,i.up)("q-dialog"),N=(0,i.Q2)("ripple"),D=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(i.HY,null,[(0,i.Wm)("div",n,[(0,i.Wm)("div",s,(0,l.zw)(e.data.denominacion),1),(0,i.Wm)("div",r,[(0,i.Wm)(W,{src:`/storage/estaciones/${e.data.id}.png`,ratio:16/9,style:{height:"180px"}},null,8,["src"])]),(0,i.Wm)("div",d,[(0,i.Wm)(_,{dense:"",bordered:"",padding:"",class:"rounded-borders scroll q-ml-sm",style:{height:"180px"}},{default:o((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.data.ultimaMedicion,((e,a)=>(0,i.wy)(((0,i.wg)(),(0,i.j4)(Z,{clickable:"",key:a},{default:o((()=>[(0,i.Wm)(q,null,{default:o((()=>[(0,i.Wm)(w,null,{default:o((()=>[(0,i.Uk)((0,l.zw)(e.descripcion),1)])),_:2},1024),(0,i.Wm)(w,{caption:""},{default:o((()=>[(0,i.Uk)((0,l.zw)(e.valorMedicion)+" "+(0,l.zw)(e.unidad),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[N]]))),128))])),_:1}),(0,i.Wm)("div",c,[(0,i.Wm)(H,{color:"secondary",label:"Editar",onClick:e.openDialog},null,8,["onClick"]),(0,i.Wm)(H,{class:"q-ml-sm",color:"primary",label:"Exportar datos",onClick:a[1]||(a[1]=a=>e.router.push({name:"exportar",params:{id:e.id}}))})])])]),(0,i.Wm)("div",m,[(0,i.Wm)(k,{modelValue:e.optionVisualizacion,"onUpdate:modelValue":a[2]||(a[2]=a=>e.optionVisualizacion=a),spread:"",class:"my-custom-toggle","no-caps":"",rounded:"",unelevated:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"Tabla",value:"tabla"},{label:"Graficos",value:"graficos"}]},null,8,["modelValue"])]),(0,i.Wm)(C,{visible:!0,style:{height:"100vh","min-height":"inherit","max-height":"100vh","max-width":"100%"},class:"q-px-lg"},{default:o((()=>["tabla"==e.optionVisualizacion?((0,i.wg)(),(0,i.j4)("div",u,[(0,i.Wm)(V,{title:"Historico",rows:e.dataHistorico.data,columns:e.columns,"row-key":"id",pagination:e.pagination,"onUpdate:pagination":a[4]||(a[4]=a=>e.pagination=a),loading:e.loading,filter:e.filter,onRequest:e.onRequest,"binary-state-sort":""},{"top-right":o((()=>[(0,i.Wm)(z,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[3]||(a[3]=a=>e.filter=a),placeholder:"Search"},{append:o((()=>[(0,i.Wm)(P,{name:"search"})])),_:1},8,["modelValue"])])),body:o((e=>[(0,i.Wm)(R,{props:e,class:"cursor-pointer"},{default:o((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.cols,(a=>((0,i.wg)(),(0,i.j4)(Q,{key:a.name,props:e},{default:o((()=>["updated_at"==a.name?((0,i.wg)(),(0,i.j4)("p",p,(0,l.zw)(e.row[a.name]),1)):((0,i.wg)(),(0,i.j4)("div",g,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.mediciones,((e,t)=>((0,i.wg)(),(0,i.j4)("p",{key:t},[a.name==e.descripcion?((0,i.wg)(),(0,i.j4)("span",v,(0,l.zw)(e.valorMedicion)+(0,l.zw)(e.unidad),1)):(0,i.kq)("",!0)])))),128))]))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"])])):((0,i.wg)(),(0,i.j4)("div",f,[(0,i.Wm)(E,{estacion:e.data.id},null,8,["estacion"])]))])),_:1}),(0,i.Wm)($,{modelValue:e.dialogEditar,"onUpdate:modelValue":a[5]||(a[5]=a=>e.dialogEditar=a)},{default:o((()=>[(0,i.Wm)(T,{style:{width:"700px","max-width":"80vw"}},{default:o((()=>[(0,i.Wm)(j,null,{default:o((()=>[y])),_:1}),(0,i.Wm)(j,{class:"q-pt-none"},{default:o((()=>[(0,i.Wm)(B,{class:"bg-secondary p-2 border-2 rounded-2 col-12",center:{lat:e.marcador.lat,lng:e.marcador.lng},zoom:6,"map-type-id":"terrain",style:{height:"400px"}},{default:o((()=>[(0,i.Wm)(M,{key:e.marcador.id,position:e.marcador,draggable:!0,onDragend:e.cambiarPos},null,8,["position","onDragend"])])),_:1},8,["center"])])),_:1}),(0,i.Wm)(S,{align:"right",class:"bg-white text-teal"},{default:o((()=>[(0,i.wy)((0,i.Wm)(H,{flat:"",label:"Cerrar"},null,512),[[D]]),(0,i.Wm)(H,{flat:"",color:"primary",label:"Guardar",onClick:e.guardar},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}));var b=t(1959),h=t(2584),W=t(5474),w=t(6249),q=t(6394),Z=t(8825);const _=()=>{const e=(0,b.iH)([]),a=(0,b.iH)(null),t=(0,Z.Z)(),i=(0,b.iH)([]),l=(0,b.iH)({sortBy:"updated_at",descending:!1,page:1,rowsPerPage:10,rowsNumber:10}),o=async(o,n)=>{w.Z.show({spinner:q.Z}),await W.api.get(`/api/v1/admin/estacion/${o}/historico/?props=${JSON.stringify(n)}&page=${n.pagination.page}`).then((a=>{i.value=[],i.value.push({name:"updated_at",label:"Fecha medicion",align:"left",sortable:!0}),a.data.data[0].mediciones.forEach((e=>{i.value.push({name:e.descripcion,label:e.descripcion,align:"left",sortable:!0})})),e.value=a.data,l.value.rowsNumber=a.data.total,l.value.rowsPerPage=a.data.per_page,l.value.page=a.data.current_page})).catch((e=>{console.log(e),a.value=!0})),t.loading.hide()};return{data:e,error:a,columns:i,getHistoricoEstacion:o,pagination:l}};var H=t(2139),k=t(9582);const P=(0,i.aZ)({name:"verEstacion",components:{StaticsDashboard:H.Z},props:{id:{type:String,required:!0}},setup(e){const{data:a,getEstacion:t,updateEstacion:l}=(0,h.E)(),{data:o,columns:n,getHistoricoEstacion:s,pagination:r}=_(),d=(0,b.iH)(e.id),c=(0,k.tv)(),m=e=>{const{page:a,rowsPerPage:t,sortBy:i,descending:l}=e.pagination;r.value.page=a,r.value.rowsPerPage=t,r.value.sortBy=i,r.value.descending=l,s(d.value,e)};(0,i.bv)((async()=>{await t(e.id),await s(e.id,{pagination:r.value,filter:void 0})}));const u=(0,b.iH)(""),p=(0,b.iH)(!1),g=(0,b.iH)("tabla"),v=(0,b.iH)(!1),f=()=>{x.value.id=a.value.id,x.value.lat=Number(a.value.latitud),x.value.lng=Number(a.value.longitud),v.value=!0},y=async()=>{v.value=!1,t(a.value.id)},x=(0,b.iH)({id:null,lat:null,lng:null}),W=async e=>{x.value.lat=e.latLng.lat(),x.value.lng=e.latLng.lng()},w=async()=>{const e=await l(x);e&&y()};return{props:e,data:a,getEstacion:t,dataHistorico:o,getHistoricoEstacion:s,onRequest:m,filter:u,loading:p,pagination:r,columns:n,dialogEditar:v,openDialog:f,marcador:x,cambiarPos:W,guardar:w,optionVisualizacion:g,router:c}}});var z=t(4027),Q=t(7011),R=t(3414),V=t(2035),E=t(2350),C=t(8240),j=t(8761),M=t(7704),B=t(6429),S=t(4842),T=t(4554),$=t(8186),N=t(3884),D=t(6778),I=t(151),L=t(5589),U=t(9367),G=t(6489),K=t(677),Y=t(7518),A=t.n(Y);P.render=x,P.__scopeId="data-v-6bda07ee";const O=P;A()(P,"components",{QImg:z.Z,QList:Q.Z,QItem:R.Z,QItemSection:V.Z,QItemLabel:E.Z,QBtn:C.Z,QBtnToggle:j.Z,QScrollArea:M.Z,QTable:B.Z,QInput:S.Z,QIcon:T.Z,QTr:$.Z,QTd:N.Z,QDialog:D.Z,QCard:I.Z,QCardSection:L.Z,QCardActions:U.Z}),A()(P,"directives",{Ripple:G.Z,ClosePopup:K.Z})}}]);