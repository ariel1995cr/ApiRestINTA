"use strict";(self["webpackChunkquasarfront"]=self["webpackChunkquasarfront"]||[]).push([[453],{8453:(e,a,o)=>{o.r(a),o.d(a,{default:()=>y});var r=o(3673);const i=(0,r.HX)("data-v-09f98065");(0,r.dD)("data-v-09f98065");const n={class:"row q-pa-lg"},t={class:"col-6 q-pa-sm"},s={class:"col-6 q-pa-sm"},l={class:"col-12 q-pa-sm"},c={class:"row q-pa-sm justify-content-end"};(0,r.Cn)();const d=i(((e,a,o,i,d,p)=>{var m,f,u,h,v,g;const b=(0,r.up)("q-input"),w=(0,r.up)("q-select"),k=(0,r.up)("q-btn");return(0,r.wg)(),(0,r.j4)("div",n,[(0,r.Wm)("div",t,[(0,r.Wm)(b,{filled:"",modelValue:e.data.fechaInicio,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.fechaInicio=a),label:"Fecha inicio",mask:"##/##/####","fill-mask":"#",hint:"Ingrese la fecha en formato DD/MM/AAAA",error:(null===(m=e.errores.fechaInicio)||void 0===m?void 0:m.length)>0,"error-message":(null===(f=e.errores.fechaInicio)||void 0===f?void 0:f.length)>0?e.errores.fechaInicio[0]:""},null,8,["modelValue","error","error-message"])]),(0,r.Wm)("div",s,[(0,r.Wm)(b,{filled:"",modelValue:e.data.fechaFin,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.fechaFin=a),label:"Fecha fin",mask:"##/##/####","fill-mask":"#",hint:"Ingrese la fecha en formato DD/MM/AAAA",error:(null===(u=e.errores.fechaFin)||void 0===u?void 0:u.length)>0,"error-message":(null===(h=e.errores.fechaFin)||void 0===h?void 0:h.length)>0?e.errores.fechaFin[0]:""},null,8,["modelValue","error","error-message"])]),(0,r.Wm)("div",l,[(0,r.Wm)(w,{filled:"",multiple:"",modelValue:e.data.mediciones,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.mediciones=a),options:e.dataReportes,label:"Seleccionar mediciones para reporte",error:(null===(v=e.errores.mediciones)||void 0===v?void 0:v.length)>0,"error-message":(null===(g=e.errores.mediciones)||void 0===g?void 0:g.length)>0?e.errores.mediciones[0]:""},null,8,["modelValue","options","error","error-message"])]),(0,r.Wm)("div",c,[(0,r.Wm)(k,{color:"primary",label:"Exportar datos",onClick:a[4]||(a[4]=a=>e.exportarPdf(e.id,e.data.fechaInicio,e.data.fechaFin,e.data.mediciones))})])])}));var p=o(1959),m=(o(71),o(7965),o(5474)),f=o(6249),u=o(6394),h=o(8825);const v=()=>{const e=(0,h.Z)(),a=(0,p.iH)([]),o=(0,p.iH)([]),r=async o=>{f.Z.show({spinner:u.Z}),await m.api.get(`/api/v1/admin/estacion/${o}/medicionesPosibles`).then((e=>{a.value=e.data})).catch((a=>{console.log(a),e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),e.loading.hide()},i=async(a,r,i,n)=>{f.Z.show({spinner:u.Z}),await m.api.post("/api/v1/admin/estacion/exportar/pdf",{id:a,fechaInicio:r,fechaFin:i,mediciones:n},{responseType:"blob"}).then((e=>{console.log(e.data);const a=new Blob([e.data],{type:"application/pdf"}),o=window.URL.createObjectURL(a),r=document.createElement("a");r.href=o,r.setAttribute("target","_blank"),r.click(),r.remove(),URL.revokeObjectURL(o)})).catch((a=>{o.value=a.response.data.errors,e.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),e.loading.hide()};return{data:a,getMedicionesPosibles:r,exportarPdf:i,errores:o}},g=(0,r.aZ)({name:"Exportar",props:{id:{type:String,required:!0}},setup(e){const{errores:a,data:o,getMedicionesPosibles:i,exportarPdf:n}=v(),t=(0,p.qj)({fechaInicio:null,fechaFin:null,mediciones:null});return(0,r.bv)((async()=>{await i(e.id)})),{data:t,dataReportes:o,exportarPdf:n,errores:a}}});var b=o(4842),w=o(7637),k=o(8240),q=o(7518),I=o.n(q);g.render=d,g.__scopeId="data-v-09f98065";const y=g;I()(g,"components",{QInput:b.Z,QSelect:w.Z,QBtn:k.Z})}}]);