"use strict";(self["webpackChunkquasarfront"]=self["webpackChunkquasarfront"]||[]).push([[18],{2584:(a,e,t)=>{t.d(e,{E:()=>r});var o=t(5474),i=t(1959),n=t(6249),s=t(6394),l=t(8825);const r=()=>{const a=(0,l.Z)(),e=(0,i.iH)([]),t=async()=>{n.Z.show({spinner:s.Z}),await o.api.get("/api/v1/admin/estaciones").then((a=>{e.value=a.data,e.value.forEach((a=>{a.position={lat:Number(a.Latitud),lng:Number(a.Longitud)}}))})).catch((e=>{console.log(e),a.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),a.loading.hide()},r=async t=>{n.Z.show({spinner:s.Z}),await o.api.get("/api/v1/admin/estacion/"+t).then((a=>{e.value=a.data})).catch((e=>{console.log(e),a.notify({color:"negative",position:"top",message:"Contactese con el administrador.",icon:"report_problem"})})),n.Z.hide()};return{data:e,getEstaciones:t,getEstacion:r}}},2018:(a,e,t)=>{t.r(e),t.d(e,{default:()=>L});var o=t(3673),i=t(2323);const n=(0,o.HX)("data-v-aeabbea0");(0,o.dD)("data-v-aeabbea0");const s={class:"text-h4 text-center"},l={class:"row justify-start q-mx-lg"},r={class:"col-12 col-md-6"},d={class:"col-12 col-md-6"},c={class:"col-12"},p={key:0},u={key:1};(0,o.Cn)();const g=n(((a,e,t,g,m,v)=>{const w=(0,o.up)("q-img"),b=(0,o.up)("q-item-label"),f=(0,o.up)("q-item-section"),h=(0,o.up)("q-item"),Z=(0,o.up)("q-list"),y=(0,o.up)("q-icon"),q=(0,o.up)("q-input"),H=(0,o.up)("q-td"),_=(0,o.up)("q-tr"),W=(0,o.up)("q-table"),k=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(o.HY,null,[(0,o.Wm)("div",s,(0,i.zw)(a.data.denominacion),1),(0,o.Wm)("div",l,[(0,o.Wm)("div",r,[(0,o.Wm)(w,{src:`/storage/estaciones/${a.data.id}.png`,ratio:16/9},null,8,["src"])]),(0,o.Wm)("div",d,[(0,o.Wm)(Z,{dense:"",bordered:"",padding:"",class:"rounded-borders"},{default:n((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(a.data.ultimaMedicion,((a,e)=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(h,{clickable:"",key:e},{default:n((()=>[(0,o.Wm)(f,null,{default:n((()=>[(0,o.Wm)(b,null,{default:n((()=>[(0,o.Uk)((0,i.zw)(a.descripcion),1)])),_:2},1024),(0,o.Wm)(b,{caption:""},{default:n((()=>[(0,o.Uk)((0,i.zw)(a.valorMedicion)+" "+(0,i.zw)(a.unidad),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[k]]))),128))])),_:1})]),(0,o.Wm)("div",c,[(0,o.Wm)(W,{title:"Historico",rows:a.dataHistorico.data,columns:a.columns,"row-key":"id",pagination:a.pagination,"onUpdate:pagination":e[2]||(e[2]=e=>a.pagination=e),loading:a.loading,filter:a.filter,onRequest:a.onRequest,"binary-state-sort":""},{"top-right":n((()=>[(0,o.Wm)(q,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":e[1]||(e[1]=e=>a.filter=e),placeholder:"Search"},{append:n((()=>[(0,o.Wm)(y,{name:"search"})])),_:1},8,["modelValue"])])),body:n((a=>[(0,o.Wm)(_,{props:a,class:"cursor-pointer"},{default:n((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(a.cols,((e,t)=>((0,o.wg)(),(0,o.j4)(H,{key:e.name,props:a},{default:n((()=>{var n,s,l,r;return["updated_at"==e.name?((0,o.wg)(),(0,o.j4)("p",p,(0,i.zw)(a.row[e.name]),1)):((0,o.wg)(),(0,o.j4)("p",u,(0,i.zw)(null===(n=a.row)||void 0===n||null===(s=n.mediciones[t-1])||void 0===s?void 0:s.valorMedicion)+" "+(0,i.zw)(null===(l=a.row)||void 0===l||null===(r=l.mediciones[t-1])||void 0===r?void 0:r.unidad),1))]})),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"])])])],64)}));var m=t(1959),v=t(2584),w=t(5474),b=t(6249),f=t(6394),h=t(8825);const Z=()=>{const a=(0,m.iH)([]),e=(0,m.iH)(null),t=(0,h.Z)(),o=(0,m.iH)([]),i=(0,m.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:10}),n=async(n,s)=>{b.Z.show({spinner:f.Z});const l="/api/v1/admin/estacion/"+n+"/historico/?props="+JSON.stringify(s)+"&page="+s.pagination.page;await w.api.get(l).then((e=>{o.value.push({name:"updated_at",label:"Fecha medicion",align:"left",sortable:!0}),e.data.data[0].mediciones.forEach((a=>{o.value.push({name:a.descripcion,label:a.descripcion,align:"left",sortable:!0})})),a.value=e.data,i.value.rowsNumber=e.data.total,i.value.rowsPerPage=e.data.per_page,i.value.page=e.data.current_page})).catch((a=>{console.log(a),e.value=!0})),t.loading.hide()};return{data:a,error:e,columns:o,getHistoricoEstacion:n,pagination:i}},y=(0,o.aZ)({name:"verEstacion",props:{id:{type:String,required:!0}},setup(a){const{data:e,getEstacion:t}=(0,v.E)(),{data:i,columns:n,getHistoricoEstacion:s,pagination:l}=Z();(0,o.bv)((async()=>{await t(a.id),await s(a.id,{pagination:l.value,filter:void 0})}));const r=async e=>s(a.id,e),d=(0,m.iH)(""),c=(0,m.iH)(!1);return{props:a,data:e,getEstacion:t,dataHistorico:i,getHistoricoEstacion:s,onRequest:r,filter:d,loading:c,pagination:l,columns:n}}});var q=t(4027),H=t(7011),_=t(3414),W=t(2035),k=t(2350),E=t(6429),Q=t(4842),j=t(4554),z=t(8186),I=t(3884),C=t(6489),N=t(7518),R=t.n(N);y.render=g,y.__scopeId="data-v-aeabbea0";const L=y;R()(y,"components",{QImg:q.Z,QList:H.Z,QItem:_.Z,QItemSection:W.Z,QItemLabel:k.Z,QTable:E.Z,QInput:Q.Z,QIcon:j.Z,QTr:z.Z,QTd:I.Z}),R()(y,"directives",{Ripple:C.Z})}}]);