"use strict";(self["webpackChunkquasarfront"]=self["webpackChunkquasarfront"]||[]).push([[547],{5365:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Z});var r=a(3673),o=a(2323);const i={class:"row justify-end q-mx-lg q-mt-lg"},t={class:"col-12"},n={class:"text-h6"};function u(e,l,a,u,d,s){const m=(0,r.up)("q-icon"),c=(0,r.up)("q-input"),p=(0,r.up)("q-btn"),w=(0,r.up)("q-td"),b=(0,r.up)("q-table"),g=(0,r.up)("q-card-section"),v=(0,r.up)("q-select"),f=(0,r.up)("q-card-actions"),k=(0,r.up)("q-card"),q=(0,r.up)("q-dialog"),W=(0,r.up)("q-page-sticky"),y=(0,r.up)("q-page"),C=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)("div",i,[(0,r.Wm)("div",t,[(0,r.Wm)(b,{title:"Usuarios",rows:e.data.data,columns:e.columns,"row-key":"id",pagination:e.pagination,loading:e.loading,filter:e.filter,onRequest:e.onRequest,"binary-state-sort":!0},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(c,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:"Search"},{append:(0,r.w5)((()=>[(0,r.Wm)(m,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-acciones":(0,r.w5)((l=>[(0,r.Wm)(w,{props:l},{default:(0,r.w5)((()=>[(0,r.Wm)("div",null,[(0,r.Wm)(p,{color:"primary",label:"Editar",onClick:a=>e.openDialog(l.row,!0)},null,8,["onClick"]),(0,r.Wm)(p,{class:"q-ml-lg",color:"red",label:"Eliminar",onClick:a=>e.eliminar(l.row)},null,8,["onClick"])])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"])])]),(0,r.Wm)(q,{modelValue:e.medium,"onUpdate:modelValue":l[6]||(l[6]=l=>e.medium=l)},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{style:{width:"700px","max-width":"80vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)("div",n,(0,o.zw)(e.title),1)])),_:1}),(0,r.Wm)(g,{class:"q-pt-none"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:e.userSelected.nombre,"onUpdate:modelValue":l[2]||(l[2]=l=>e.userSelected.nombre=l),label:"Nombre",error:e.errors.hasOwnProperty("nombre")},{error:(0,r.w5)((()=>{var l;return[(0,r.Uk)((0,o.zw)(null===(l=e.errors)||void 0===l?void 0:l.nombre[0]),1)]})),_:1},8,["modelValue","error"]),(0,r.Wm)(c,{modelValue:e.userSelected.apellido,"onUpdate:modelValue":l[3]||(l[3]=l=>e.userSelected.apellido=l),label:"Apellido",error:e.errors.hasOwnProperty("apellido")},{error:(0,r.w5)((()=>{var l;return[(0,r.Uk)((0,o.zw)(null===(l=e.errors)||void 0===l?void 0:l.apellido[0]),1)]})),_:1},8,["modelValue","error"]),(0,r.Wm)(c,{modelValue:e.userSelected.email,"onUpdate:modelValue":l[4]||(l[4]=l=>e.userSelected.email=l),label:"Email",error:e.errors.hasOwnProperty("email")},{error:(0,r.w5)((()=>{var l;return[(0,r.Uk)((0,o.zw)(null===(l=e.errors)||void 0===l?void 0:l.email[0]),1)]})),_:1},8,["modelValue","error"]),(0,r.Wm)(v,{modelValue:e.userSelected.rol,"onUpdate:modelValue":l[5]||(l[5]=l=>e.userSelected.rol=l),options:e.options,label:"Rol",error:e.errors.hasOwnProperty("rol")},{error:(0,r.w5)((()=>{var l;return[(0,r.Uk)((0,o.zw)(null===(l=e.errors)||void 0===l?void 0:l.rol[0]),1)]})),_:1},8,["modelValue","options","error"])])),_:1}),(0,r.Wm)(f,{align:"right",class:"bg-white text-teal"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(p,{flat:"",label:"Cerrar"},null,512),[[C]]),e.editar?((0,r.wg)(),(0,r.j4)(p,{key:0,flat:"",color:"primary",label:"Guardar",onClick:e.actualizar},null,8,["onClick"])):((0,r.wg)(),(0,r.j4)(p,{key:1,flat:"",color:"primary",label:"Guardar",onClick:e.actualizar},null,8,["onClick"]))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(W,{position:"bottom-right",offset:[18,18]},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{fab:"",icon:"add",color:"green",onClick:l[7]||(l[7]=l=>e.openDialog(null,!1))})])),_:1})])),_:1})}var d=a(1959),s=a(6151),m=a(8825);const c=(0,r.aZ)({name:"UsuariosIndex",setup(){const e=(0,m.Z)(),{errors:l,data:a,getUsuarios:o,updateUsuario:i,borrarUsuario:t,createUsuario:n}=(0,s.w)(),u=[{name:"nombre",label:"Nombre",field:"nombre",sortable:!0},{name:"apellido",label:"Apellido",field:"apellido",sortable:!0},{name:"email",label:"Email",field:"email",sortable:!0},{name:"rol",label:"Rol",field:"rol",sortable:!0},{name:"created_at",label:"Creado el",field:"created_at"},{name:"acciones",label:"Acciones"}],c=(0,d.iH)(!1),p=(0,d.iH)([]),w=(0,d.iH)(""),b=(0,d.iH)(!1),g=(0,d.iH)({sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:10});async function v(e){g.value=e.pagination,await o(e)}(0,r.bv)((async()=>{await o({pagination:g.value,filter:""})}));const f=(0,d.iH)({}),k=(0,d.iH)(""),q=(0,d.iH)(!1),W=["usuario","administrador"],y=(e,l)=>{q.value=l,q.value?(f.value=Object.assign({},e),k.value="Editar usuario"):(f.value={nombre:"",apellido:"",email:"",rol:""},k.value="Agregar usuario"),c.value=!0},C=async()=>{let e;e=q.value?await i(f.value,f.value.id):await n(f.value),e&&(f.value={},c.value=!1,await o({pagination:g.value,filter:""}))},V=l=>{e.dialog({title:"ConfirmaciÃ³n",message:"Desea eliminar el usuario?",cancel:!0,persistent:!0}).onOk((()=>{t(l.id),o({pagination:g.value,filter:""})})).onCancel((()=>{})).onDismiss((()=>{}))};return{actualizar:C,columns:u,data:a,errors:l,rows:p,filter:w,loading:b,pagination:g,medium:c,onRequest:v,openDialog:y,updateUsuario:i,userSelected:f,options:W,eliminar:V,title:k,editar:q}}});var p=a(4379),w=a(6429),b=a(4842),g=a(4554),v=a(3884),f=a(8240),k=a(6778),q=a(151),W=a(5589),y=a(7637),C=a(9367),V=a(1007),h=a(677),U=a(7518),_=a.n(U);c.render=u;const Z=c;_()(c,"components",{QPage:p.Z,QTable:w.Z,QInput:b.Z,QIcon:g.Z,QTd:v.Z,QBtn:f.Z,QDialog:k.Z,QCard:q.Z,QCardSection:W.Z,QSelect:y.Z,QCardActions:C.Z,QPageSticky:V.Z}),_()(c,"directives",{ClosePopup:h.Z})}}]);